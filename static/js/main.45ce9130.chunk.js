(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(19),c=(n(26),n(6)),s=n(9),i=n(0),o=Object(a.createContext)();function l(e){var t=e.children,n={modal:void 0};var r=Object(a.useReducer)((function(e,t){switch(t.type){case"modal":return Object(s.a)(Object(s.a)({},e),{},{modal:t.payload});default:return e}}),n),l=Object(c.a)(r,2),u=l[0],d=l[1];return Object(i.jsx)(o.Provider,{value:[u,d],children:t})}var u=n(2),d=n.n(u),j=n(3);var p={get:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),post:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sessionStorage.getItem("jwt"),e.next=3,fetch(t,{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"put",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),del:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"delete",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b={login:"/login",create_news:"/create-news",news:"/news",news_article:"/news/:id/:str"},h={login:"/api/v1/login",news:"/api/v1/news",session:"/api/v1/validate-session"};function f(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("article"))),t=Object(c.a)(e,2),n=t[0],r=(t[1],function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={file_name:t.target.elements[1].value,caption:t.target.elements[2].value,title:t.target.elements[3].value,author:t.target.elements[4].value,body:t.target.elements[5].value},e.next=4,p.put("".concat(h.news,"/").concat(n.id),a);case 4:e.sent,window.location.href="/news";case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(i.jsxs)("form",{className:"news-update-form",onSubmit:r,children:[Object(i.jsxs)("fieldset",{children:[Object(i.jsx)("legend",{children:"Update post"}),Object(i.jsxs)("div",{className:"image-upload",children:[Object(i.jsx)("label",{htmlFor:"upload",children:"Upload image:"}),Object(i.jsx)("input",{id:"upload",type:"file",required:!0})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"caption",children:"Image caption:"}),Object(i.jsx)("input",{id:"caption",type:"text",placeholder:"Image caption",defaultValue:n.data.caption})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"title",children:"Title of post"}),Object(i.jsx)("input",{id:"title",type:"text",placeholder:"Title of post",defaultValue:n.data.title})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"author",children:"Author"}),Object(i.jsx)("input",{id:"author",type:"text",placeholder:"Name of author",defaultValue:n.data.author})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"body",children:"Body of post"}),Object(i.jsx)("textarea",{id:"body",placeholder:"Body of post",defaultValue:n.data.body})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Submit"})})]})}function x(){var e=Object(a.useContext)(o),t=Object(c.a)(e,2),n=t[0];t[1];return Object(i.jsx)("div",{id:"modal",className:"modal",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:"close-btn",onClick:function(){document.getElementById("modal").style.display="none"},children:Object(i.jsx)("i",{className:"fa fa-times"})})}),function(){switch(n.modal){case"update-news":return Object(i.jsx)(f,{});default:return}}()]})})}function O(){return Object(i.jsx)("header",{className:"header",children:Object(i.jsx)("img",{src:"https://horizonsend.com/images/horizons-end_logo-small.png",alt:"Horizon's End"})})}var m=n(20),v=n(4);function w(){return g.apply(this,arguments)}function g(){return(g=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.cloudflare.com/cdn-cgi/trace");case 2:return t=e.sent,e.next=5,t.text();case 5:return n=e.sent,e.abrupt("return",n.substring(n.indexOf("ip=")+3,n.indexOf("ts=")));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){var e=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,w();case 3:return n=e.sent,a={username:t.target.elements[1].value,password:t.target.elements[2].value,ip_address:n},e.next=7,p.post(h.login,a);case 7:if((r=e.sent).valid){e.next=10;break}return e.abrupt("return",alert("Incorrect username or password."));case 10:sessionStorage.setItem("token",r.token),sessionStorage.setItem("jwt",r.jwt),window.location.href=b.create_news;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("form",{className:"login-form",onSubmit:e,children:[Object(i.jsxs)("fieldset",{children:[Object(i.jsx)("legend",{children:"Sign In"}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",placeholder:"Username",required:!0})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"password",placeholder:"Password",required:!0})})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Login"})})]})}function k(e){var t=e.children,n=Object(a.useState)({is_authenticated:!1}),r=Object(c.a)(n,2),s=r[0],o=r[1],l=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=sessionStorage.getItem("token"))){e.next=4;break}return window.location.href=b.login,e.abrupt("return");case 4:return n=JSON.parse(localStorage.getItem("store")),a=n.id,e.next=8,p.post(h.session,{id:a,token:t});case 8:if(e.sent.valid){e.next=12;break}return window.location.href="/",e.abrupt("return");case 12:o({is_authenticated:!0});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.jsx)("div",{children:s.is_authenticated?t:Object(i.jsx)(i.Fragment,{})})}var N=n(13);function S(){var e=Object(a.useState)({facebook:!1,twitter:!1,instagram:!1}),t=Object(c.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={file_name:t.target.elements[1].value,video:t.target.elements[2].value,caption:t.target.elements[3].value,title:t.target.elements[4].value,author:t.target.elements[5].value,body:t.target.elements[6].value,facebook:n.facebook,instagram:n.instagram,twitter:n.twitter},e.next=4,p.post(h.news,a);case 4:e.sent,window.location.href=b.news;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){r(Object(s.a)(Object(s.a)({},n),{},Object(N.a)({},e.target.id,!n[e.target.id])))};return Object(i.jsxs)("form",{className:"content-form",onSubmit:o,children:[Object(i.jsxs)("fieldset",{children:[Object(i.jsx)("legend",{children:"Create a post"}),Object(i.jsxs)("div",{className:"image-upload",children:[Object(i.jsx)("label",{htmlFor:"image-upload",children:"Upload image:"}),Object(i.jsx)("input",{id:"image-upload",type:"file",required:!0})]}),Object(i.jsxs)("div",{className:"video-upload",children:[Object(i.jsx)("label",{htmlFor:"video-upload",children:"Upload video (optional):"}),Object(i.jsx)("input",{id:"video-upload",type:"file"})]}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",placeholder:"Image caption",required:!0})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",placeholder:"Title of post",required:!0})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",placeholder:"Name of author",required:!0})}),Object(i.jsx)("div",{children:Object(i.jsx)("textarea",{placeholder:"Body of post",required:!0})}),Object(i.jsxs)("div",{className:"social-media",children:[Object(i.jsx)("div",{children:Object(i.jsx)("p",{children:"Choose which social media to submit this post to (optional):"})}),Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{id:"facebook",type:"checkbox",onChange:l}),Object(i.jsx)("label",{htmlFor:"facebook",children:"Facebook"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{id:"twitter",type:"checkbox",onChange:l}),Object(i.jsx)("label",{htmlFor:"twitter",children:"Twitter"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{id:"instagram",type:"checkbox",onChange:l}),Object(i.jsx)("label",{htmlFor:"instagram",children:"Instagram"})]})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Submit"})})]})}function C(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get(h.news);case 2:t=e.sent,n=t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:JSON.parse(e.data)})})),r({data:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.jsx)("section",{id:"news",className:"sections",children:n.hasOwnProperty("data")?n.data.map((function(e){return Object(i.jsxs)("article",{className:"article",children:[Object(i.jsxs)("figure",{children:[Object(i.jsx)("a",{href:"/news/".concat(e.id,"/").concat((t=e.data.title,t.trim().replace(/\W\s/g,"").replace(/\s+/g,"-").toLowerCase())),children:Object(i.jsx)("img",{src:"/images/".concat(e.data.file_name),alt:e.data.title})}),Object(i.jsx)("figcaption",{children:e.data.caption})]}),Object(i.jsxs)("header",{children:[Object(i.jsx)("h2",{children:e.data.title}),Object(i.jsxs)("address",{className:"author",children:["By ",Object(i.jsx)("a",{href:"",rel:"author",children:e.data.author})]}),"\xa0\u2013\xa0",Object(i.jsx)("time",{dateTime:e.date_created,children:e.date_created})]}),Object(i.jsx)("div",{children:Object(i.jsx)("p",{children:e.data.body})})]},e.id);var t})):Object(i.jsx)(i.Fragment,{})})}function _(){var e=Object(a.useContext)(o),t=Object(c.a)(e,2),n=(t[0],t[1]),r=Object(a.useState)({data:{file_name:"",caption:"",title:"",author:"",body:""}}),l=Object(c.a)(r,2),u=l[0],b=l[1],f=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.split("/")[4],e.next=3,p.get("".concat(h.news,"/").concat(t));case 3:n=e.sent,a=Object(s.a)(Object(s.a)({},n),{},{data:JSON.parse(n.data)}),localStorage.setItem("article",JSON.stringify(a)),b(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"modal",payload:"update-news"}),document.getElementById("modal").style.display="block";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete the entire post?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.del("".concat(h.news,"/").concat(u.id));case 4:e.sent,window.location.href="/news";case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.jsxs)("section",{children:[Object(i.jsxs)("div",{className:"admin-btn-container",children:[Object(i.jsx)("button",{className:"update-btn",onClick:x,children:Object(i.jsx)("i",{className:"fa fa-pencil",children:"edit"})}),Object(i.jsx)("button",{className:"delete-btn",onClick:O,children:Object(i.jsx)("i",{className:"fa fa-trash",children:"delete"})})]}),Object(i.jsxs)("article",{className:"individual-article",children:[Object(i.jsxs)("figure",{children:[Object(i.jsx)("img",{src:u.data.file_name,alt:u.title}),Object(i.jsx)("figcaption",{children:u.data.caption})]}),Object(i.jsxs)("header",{children:[Object(i.jsx)("h2",{children:u.data.title}),Object(i.jsxs)("address",{className:"",children:["By ",Object(i.jsx)("a",{href:"",rel:"author",children:u.data.author})]}),"\xa0\u2013\xa0",Object(i.jsx)("time",{dateTime:"",children:u.date_created})]}),Object(i.jsx)("div",{children:Object(i.jsx)("p",{children:u.data.body})})]})]})}function F(){return Object(i.jsx)(m.a,{children:Object(i.jsxs)(v.c,{children:[Object(i.jsx)(v.a,{exact:!0,path:b.login,children:Object(i.jsx)(y,{})}),Object(i.jsx)(v.a,{exact:!0,path:b.create_news,children:Object(i.jsx)(k,{children:Object(i.jsx)(S,{})})}),Object(i.jsx)(v.a,{exact:!0,path:b.news,children:Object(i.jsx)(k,{children:Object(i.jsx)(C,{})})}),Object(i.jsx)(v.a,{exact:!0,path:b.news_article,children:Object(i.jsx)(k,{children:Object(i.jsx)(_,{})})})]})})}function I(){return Object(i.jsxs)(l,{children:[Object(i.jsx)(x,{}),Object(i.jsx)(O,{}),Object(i.jsx)(F,{})]})}var T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};Object(r.render)(Object(i.jsx)(a.StrictMode,{children:Object(i.jsx)(I,{})}),document.getElementById("root")),T()}},[[34,1,2]]]);
//# sourceMappingURL=main.45ce9130.chunk.js.map